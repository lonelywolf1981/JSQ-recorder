# TODO: стабилизация и согласование логики

Статус ведется по пунктам: `[ ]` не начато, `[~]` в работе, `[x]` выполнено.

- [x] 1) Исправить ошибку `DialogResult` в окне настроек (повторное сохранение)
  - убрать утечки подписок `SaveCompleted/CancelRequested` на singleton VM;
  - сделать безопасное закрытие окна при сигнале save/cancel.

- [x] 2) Устранить ложные/дублирующиеся реконнекты TCP
  - не запускать авто-реконнект после намеренного `Disconnect` внутри `BeginMonitoring`;
  - сохранить защиту от параллельных попыток подключения.

- [~] 3) Убрать «залипание» Alarm после остановки записи
  - после `Stop` нормализовать статусы поста по фактической свежести данных,
    без отдельного исключения для Alarm.

- [ ] 4) Привести сохранение `channel_config` к каноническому `ChannelRegistry`
  - перестать генерировать синтетический список каналов;
  - сохранять конфиг по реестру (все канонические индексы/имена/группы/типы).

Порядок выполнения: по одному пункту -> `dotnet build` + `dotnet test` -> commit -> следующий пункт.
